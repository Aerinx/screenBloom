{% extends "/base.html" %}
{% block content %}

<div id="current-settings">
    <div id="settings-title" class="color-animate">Settings</div>

    <div class="setting setting-md">
        <div id="bri-setting-circle" class="setting-circle animate">
            <div class="bri-circle-value">
                <span class="bri-circle-label">Max</span>
                <span id="circle-max" class="setting-value">{{ max_bri }}</span>
            </div>

            <div class="bri-circle-value">
                <span class="bri-circle-label">Min</span>
                <span id="circle-min" class="setting-value">{{ min_bri }}</span>
            </div>
        </div>

        <div class="setting-label">Brightness<br>Level</div>

        <div class="setting-input hidden">
            <div class="setting-input-label">
                <div id="tester">Brightness</div>
                <i class="fa fa-question-circle-o"></i>
            </div>
            <i class="fa fa-close setting-input-close"></i>
            <div class="setting-input-spacer"></div>

            <div class="bri-slider-label">Max</div>
            <div class="bri-slider-output">
                <output id="max-bri-slider-output">{{ max_bri }}</output>
                <div class="slider-max">/ 254</div>
            </div>
            <input id="max-bri-slider" class="slider" type="range" min="{{ min_bri }}" max="254" value="{{ max_bri }}">

            <br>
            <br>

            <div class="bri-slider-label">Min</div>
            <div class="bri-slider-output">
                <output id="min-bri-slider-output">{{ min_bri }}</output>
                <div class="slider-max">/ 254</div>
            </div>
            <input id="min-bri-slider" class="slider" type="range" min="1" max="{{ max_bri }}" value="{{ min_bri }}">

            <div class="setting-input-submit animate" data-url="briUrl">
                <i class="fa fa-gear fa-spin loader hidden"></i>
                <span class="setting-input-text">Save</span>
            </div>
        </div>
    </div>

    <div class="setting setting-md">
        <div class="setting-circle animate"><span class="setting-value">{{ update }}</span><span class="seconds">seconds</span></div>
        <div class="setting-label">Update<br>Speed</div>

        <div class="setting-input hidden">
            <div class="setting-input-label">
                <div>Update Speed</div>
                <i class="fa fa-question-circle-o" aria-hidden="true"></i>
            </div>
            <i class="fa fa-close setting-input-close"></i>
            <div class="setting-input-spacer"></div>

            <output id="update-speed-slider-output">{{ update }}</output>
            <div class="slider-max"><span style="font-size: 1.25vh;"><br>(seconds)</span></div>
            <input id="update-speed-slider" class="slider" type="range" min="0.1" max="2" step="0.10" value="{{ update }}">
            <div class="setting-input-submit animate" data-url="updateSpeedUrl">
                <i class="fa fa-gear fa-spin loader hidden"></i>
                <span class="setting-input-text">Save</span>
            </div>
        </div>
    </div>

    <div class="setting">
        <div class="setting-circle default-color-circle animate" style="background-color: rgb({{ default }});"></div>
        <div class="setting-label">Default<br>Color</div>

        <div class="setting-input hidden" style="width: 14em;">
            <div class="setting-input-label">
                <div>Default Color</div>
                <i class="fa fa-question-circle-o" aria-hidden="true"></i>
            </div>
            <i class="fa fa-close setting-input-close"></i>
            <div class="setting-input-spacer"></div>

            <div id="picker" class="picker"></div>
            <div class="setting-input-submit animate" data-url="defaultColorUrl">
                <i class="fa fa-gear fa-spin loader hidden"></i>
                <span class="setting-input-text">Save</span>
            </div>
        </div>
    </div>

    <div class="setting party-mode-btn">
        <div class="setting-circle {{ 'setting-clicked' if party_mode }} party-mode-circle animate">
            <i class="fa fa-gear fa-spin loader hidden"></i>
            <span class="setting-input-text">{{ 'On' if party_mode else 'Off' }}</span>
        </div>
        <div class="setting-label">Party<br>Mode</div>

        <div class="setting-input hidden">
            <input type="text" value="{{ 1 if party_mode else 0 }}">
        </div>
    </div>

    <div class="setting" id="zone-btn">
        <div class="setting-circle animate">
            <i class="fa fa-gear fa-spin loader hidden"></i>
            <span class="setting-input-text" id="zone-state">{{ 'On' if zone_state else 'Off' }}</span>
        </div>
        <div class="setting-label">Screen<br>Zones</div>

        <div id="zone-grid-input" class="setting-input hidden">
            <div class="setting-input-label">
                <div>Screen Zones</div>
                <i class="fa fa-question-circle-o" aria-hidden="true"></i>
            </div>
            <i class="fa fa-close setting-input-close"></i>
            <div class="setting-input-spacer"></div>

            <!-- Zones -->
            <div id="zone-select">
                <p class="info-text">
                    Click on a cell to start creating a zone
                </p>

                <div id="grid"></div>
                <div id="zone-bulbs"></div>

                <div class="zone-select-buttons">
                    <input type="button" id="revert" value="Revert Changes">
                    <input type="button" id="save-zones" value="Save Changes">
                </div>
            </div>

            <div class="add-bulbs-to-zone-wrapper hidden">
                <i class="fa fa-times close-add-bulbs-to-zone-wrapper"></i>
                <span class="available-bulbs-title">Available Bulbs</span>

                <div class="available-bulbs-wrapper"></div>

                <div class="add-bulbs-to-zone-confirm">Add Bulbs</div>
            </div>

            <div id="toggle-zone-mode">Toggle Zone Mode</div>
        </div>
    </div>
</div>

<div id="bulbs">
    <div id="bulbs-title" class="color-animate">Bulbs</div>
    {% for light in lights %}
    <div id="bulb-{{ light[0] }}" class="bulb-container {{ 'bulb-inactive' if not light[3] else '' }}" data-light="{{ light[0] }}">
        <i class="fa fa-lightbulb-o animate" style="font-size: {{ icon_size }}vh;"></i>
        <span>{{ light[2]}}</span>
    </div>
    {% endfor %}
    <div class="update-bulbs animate hidden">
        <i class="fa fa-gear fa-spin loader hidden"></i>
        <span class="setting-input-text">Update Bulbs</span>
    </div>
    <div id="on-off" class="animate">
        <i class="fa fa-gear fa-spin loader hidden" style="position: relative; top: .3em;"></i>
        <span class="setting-input-text">Turn Lights <span id="on-state">On</span></span>
    </div>
</div>

<div id="start-stop">
    <div id="start-stop-title"><span class="raleway">Screen</span><span class="lobster bloom color-animate">Bloom</span></div>

    <div id="start" class="main-button animate {{ 'button-selected' if state }}">
        <span class="setting-input-text">{{ 'Start' if not state else 'Running...' }}</span>
    </div>

    <div id="stop" class="main-button animate">
        <i class="fa fa-gear fa-spin loader hidden"></i>
        <span class="setting-input-text">Stop</span>
    </div>
</div>
{% endblock %}